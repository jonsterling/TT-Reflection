\documentclass{amsart}

\usepackage{proof}

\title{A Type Theory with Scoped Equality Reflection}
\author{Jonathan Sterling}


\begin{document}
\maketitle

\def\emp{\diamond}
\def\sig{\mbox{ sig}}
\def\ctx{\mbox{ ctx}}
\def\hints{\mbox{ hints}}
\def\fresh{\mathrel{\#}}

Feel free to change the stuff below as our thinking evolves. This is just a
starting point. We have the following judgments:

\bigskip
\begin{tabular}{ll}
$\vdash\Sigma\sig$                            & $\Sigma$ is a valid signature\\
$\mathcal{H}\vdash_\Sigma\Gamma\ctx$          & $\Gamma$ is a valid context\\
$\Gamma\vdash_\Sigma\mathcal{H}\hints$        & $\mathcal{H}$ is a valid hints set\\
$\Gamma;\mathcal{H}\vdash_\Sigma M:A$         & $M$ has type $A$\\
$\Gamma;\mathcal{H}\vdash_\Sigma M\equiv N:A$ & $M$ equals $N$ at type $A$
\end{tabular}
\bigskip

\noindent
The rules for the theory are given inductive-recursively below.

\begin{equation}
  \infer{\vdash\emp\sig}{}
  \qquad
  \infer{
    \vdash\Sigma,c:A\sig
  }{
    \vdash\Sigma\sig &
    \emp\vdash_\Sigma^\emp A:\mathbb{U} &
    \Sigma\fresh c
  }
  \tag{Signatures}
\end{equation}

\begin{equation}
  \infer{\mathcal{H}\vdash_\Sigma\emp\ctx}{}
  \qquad
  \infer{
    \mathcal{H}\vdash_\Sigma\Gamma,x:A\ctx
  }{
    \mathcal{H}\vdash_\Sigma\Gamma\ctx &
    \Gamma;\mathcal{H}\vdash_\Sigma A:\mathbb{U} &
    \Gamma\fresh x
  }
  \tag{Contexts}
\end{equation}

\begin{equation}
  \infer{\Gamma\vdash \emp\hints}{}
  \qquad
  \infer{
    \Gamma\vdash_\Sigma \mathcal{H}, a\equiv b:A\hints
  }{
    \Gamma\vdash_\Sigma \mathcal{H}\hints &
    \Gamma;\mathcal{H}\vdash_\Sigma A: \mathbb{U} &
    \Gamma;\mathcal{H}\vdash_\Sigma a,b : A
  }
  \tag{Hints}
\end{equation}

\begin{equation}
  \infer{
    \Gamma;\mathcal{H}\vdash_\Sigma x:A
  }{
    x:A\in\Gamma
  }
  \qquad
  \infer{
    \Gamma;\mathcal{H}\vdash_\Sigma c:A
  }{
    c:A\in\Sigma
  }
  \qquad
  \infer{
    \Gamma;\mathcal{H}\vdash_\Sigma a\equiv b:A
  }{
    a\equiv b:A \in \mathcal{H}
  }
  \qquad
  \tag{Projection}
\end{equation}

\begin{equation}
  \infer{
    \Gamma;\mathcal{H}\vdash_\Sigma \mathsf{reflect}\ p\ \mathsf{in}\ e : C
  }{
    \Gamma;\mathcal{H}\vdash_\Sigma p : \mathsf{Id}_A\,a\;b &
    \Gamma;(\mathcal{H}, a\equiv b:A)\vdash_\Sigma e : C
  }
  \tag{Reflect}
\end{equation}

\end{document}
